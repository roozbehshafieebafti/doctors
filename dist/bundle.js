(()=>{"use strict";var e=[{id:1,name:"طغرلی",count:0,twoPersons:13,perHolidays:10,holidays:13,offCount:0,flag48:!0,dayOFFlag48:0,countinues:4,lastDayOfWork:0,notWorkingDays:[14,15]},{id:2,name:"بهرام",count:0,twoPersons:15,perHolidays:13,holidays:9,offCount:0,flag48:!1,dayOFFlag48:-3,countinues:1,lastDayOfWork:-1,notWorkingDays:[4,5,6]},{id:3,name:"شبان",count:0,twoPersons:14,perHolidays:11,holidays:12,offCount:0,flag48:!1,dayOFFlag48:-3,countinues:1,lastDayOfWork:-1,notWorkingDays:[25,26,27]},{id:4,name:"ایزدی",count:0,twoPersons:11,perHolidays:9,holidays:15,offCount:0,flag48:!1,dayOFFlag48:-3,countinues:0,lastDayOfWork:-1,notWorkingDays:[13,14]},{id:5,name:"نادری",count:0,twoPersons:13,perHolidays:11,holidays:12,offCount:0,flag48:!0,dayOFFlag48:0,countinues:2,lastDayOfWork:0,notWorkingDays:[]},{id:6,name:"یزدان",count:0,twoPersons:11,perHolidays:14,holidays:11,offCount:0,flag48:!1,dayOFFlag48:-3,countinues:4,lastDayOfWork:-1,notWorkingDays:[18,19,20]},{id:7,name:"جلال",count:0,twoPersons:17,perHolidays:14,holidays:10,offCount:0,flag48:!0,dayOFFlag48:0,countinues:2,lastDayOfWork:0,notWorkingDays:[11,12,13]}],n=[2,3,8,11,16,21,25,29,31],t=[6,13,14,15,20,27],r=[5,12,13,14,19,26],o=[];function a(e,n,t,r,a){return i=this,u=void 0,c=function(){var i,u,l,c,s,f,d,p,h,y,m,v,b;return function(e,n){var t,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(e,i)}catch(e){a=[6,e],r=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}(this,(function(w){switch(w.label){case 0:return o.includes(n)?(u=t.filter((function(e){if(6!==e.id&&7!==e.id)return new Promise((function(n){return n(e)}))})),[4,Promise.all(u)]):[3,2];case 1:return i=w.sent(),[3,3];case 2:i=function(e,n,t){if(t||2===arguments.length)for(var r,o=0,a=n.length;o<a;o++)!r&&o in n||(r||(r=Array.prototype.slice.call(n,0,o)),r[o]=n[o]);return e.concat(r||Array.prototype.slice.call(n))}([],t,!0),w.label=3;case 3:return l=i.filter((function(n){if(!e.includes(n.id))return new Promise((function(e){return e(n)}))})),[4,Promise.all(l)];case 4:return c=w.sent(),s=c.filter((function(e){if(e.count<12)return new Promise((function(n){return n(e)}))})),[4,Promise.all(s)];case 5:return f=w.sent(),d=f.filter((function(e){if(!1===e.flag48)return new Promise((function(n){return n(e)}))})),[4,Promise.all(d)];case 6:return p=w.sent(),h=p.filter((function(e){if(e.countinues<4)return new Promise((function(n){return n(e)}))})),[4,Promise.all(h)];case 7:return y=w.sent(),m=y.filter((function(e){if(!e.notWorkingDays.includes(n))return new Promise((function(n){return n(e)}))})),[4,Promise.all(m)];case 8:return v=w.sent(),r?(b=v.filter((function(e){if(7!==e.id)return new Promise((function(n){return n(e)}))})),[4,Promise.all(b)]):[3,10];case 9:return[2,w.sent()];case 10:return a?(b=v.filter((function(e){if(6!==e.id)return new Promise((function(n){return n(e)}))})),[4,Promise.all(b)]):[3,12];case 11:return[2,w.sent()];case 12:return[2,v]}}))},new((l=void 0)||(l=Promise))((function(e,n){function t(e){try{o(c.next(e))}catch(e){n(e)}}function r(e){try{o(c.throw(e))}catch(e){n(e)}}function o(n){var o;n.done?e(n.value):(o=n.value,o instanceof l?o:new l((function(e){e(o)}))).then(t,r)}o((c=c.apply(i,u||[])).next())}));var i,u,l,c}function i(e,n,t,o,i){return u=this,l=void 0,s=function(){var u,l,c;return function(e,n){var t,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(e,i)}catch(e){a=[6,e],r=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,a(e,n,t,o,i)];case 1:if(0===(u=s.sent()).length)throw"no user for selection";return u.length>1&&r.includes(n)?(u.sort((function(e,n){return e.perHolidays-n.perHolidays})),[2,u[0]]):(l=Math.floor(Math.random()*u.length),[2,u[l]]);case 2:return c=s.sent(),console.log("error",c),[2,void 0];case 3:return[2]}}))},new((c=void 0)||(c=Promise))((function(e,n){function t(e){try{o(s.next(e))}catch(e){n(e)}}function r(e){try{o(s.throw(e))}catch(e){n(e)}}function o(n){var o;n.done?e(n.value):(o=n.value,o instanceof c?o:new c((function(e){e(o)}))).then(t,r)}o((s=s.apply(u,l||[])).next())}));var u,l,c,s}var u=function(){return u=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},u.apply(this,arguments)};function l(e,o,a,i,l){return c=this,s=void 0,d=function(){var c;return function(e,n){var t,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(e,i)}catch(e){a=[6,e],r=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}(this,(function(s){switch(s.label){case 0:return c=e.map((function(e){if(e.id===a.id||e.id===i.id||l&&e.id===l.id){var c=t.includes(o),s=r.includes(o),f=n.includes(o);return new Promise((function(n){n(u(u({},e),{count:e.count+1,flag48:!0,dayOFFlag48:o,countinues:e.countinues+1,lastDayOfWork:o,perHolidays:s?e.perHolidays+1:e.perHolidays,holidays:c?e.holidays+1:e.holidays,twoPersons:f?e.twoPersons+1:e.twoPersons}))}))}return new Promise((function(n){return n(e)}))})),[4,Promise.all(c)];case 1:return[2,s.sent()]}}))},new((f=void 0)||(f=Promise))((function(e,n){function t(e){try{o(d.next(e))}catch(e){n(e)}}function r(e){try{o(d.throw(e))}catch(e){n(e)}}function o(n){var o;n.done?e(n.value):(o=n.value,o instanceof f?o:new f((function(e){e(o)}))).then(t,r)}o((d=d.apply(c,s||[])).next())}));var c,s,f,d}var c=function(){return c=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},c.apply(this,arguments)};function s(e,n){return t=this,r=void 0,a=function(){var t;return function(e,n){var t,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(e,i)}catch(e){a=[6,e],r=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}(this,(function(r){switch(r.label){case 0:return t=e.map((function(e){var t;return t=e.dayOFFlag48===n-2?c(c({},e),{flag48:!1,dayOFFlag48:-3}):c({},e),n-e.lastDayOfWork>2&&(t=c(c({},t),{countinues:0})),new Promise((function(e){return e(t)}))})),[4,Promise.all(t)];case 1:return[2,r.sent()]}}))},new((o=void 0)||(o=Promise))((function(e,n){function i(e){try{l(a.next(e))}catch(e){n(e)}}function u(e){try{l(a.throw(e))}catch(e){n(e)}}function l(n){var t;n.done?e(n.value):(t=n.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,u)}l((a=a.apply(t,r||[])).next())}));var t,r,o,a}var f,d=function(e,n,t,r){return new(t||(t=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function u(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,u)}l((r=r.apply(e,n||[])).next())}))},p=function(e,n){var t,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(e,i)}catch(e){a=[6,e],r=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},h={};function y(){return d(this,void 0,void 0,(function(){var t,r,o,a,u,c,d,y;return p(this,(function(p){switch(p.label){case 0:t=JSON.parse(JSON.stringify(e)),r=1,p.label=1;case 1:return r<=31?[4,s(t,r)]:[3,11];case 2:return o=p.sent(),[4,i([],r,o,a=!1,u=!1)];case 3:return(c=p.sent())?(a||u||(a=6===c.id,u=7===c.id),[4,i([c.id],r,o,a,u)]):[3,11];case 4:return(d=p.sent())?(a||u||(a=6===d.id,u=7===d.id),n.includes(r)?[3,7]:[4,i([c.id,d.id],r,o,a,u)]):[3,11];case 5:return(y=p.sent())?(h["".concat(r)]=[c,d,y],[4,l(o,r,c,d,y)]):[3,11];case 6:return t=p.sent(),[3,9];case 7:return h["".concat(r)]=[c,d],[4,l(o,r,c,d)];case 8:t=p.sent(),p.label=9;case 9:f=t,p.label=10;case 10:return r++,[3,1];case 11:return[2]}}))}))}d(void 0,void 0,void 0,(function(){var e,n,t;return p(this,(function(r){switch(r.label){case 0:e=0,r.label=1;case 1:if(!(e<500))return[3,6];n=0,t=!0,r.label=2;case 2:return 31===Object.keys(h).length?[3,4]:(n++,[4,y()]);case 3:return r.sent(),1e3===n?(t=!1,[3,4]):[3,2];case 4:if(t)return function(e,n){var t=document.createElement("table");document.body.appendChild(t);var r=document.createElement("tr"),o=document.createElement("th");o.innerHTML="روز";var a=document.createElement("th");a.innerHTML="جایگاه اول";var i=document.createElement("th");i.innerHTML="جایگاه دوم";var u=document.createElement("th");u.innerHTML="جایگاه سوم",r.appendChild(o),r.appendChild(a),r.appendChild(i),r.appendChild(u),t.appendChild(r),Object.keys(e).map((function(n){var r=document.createElement("tr"),o=document.createElement("td");o.innerHTML=n,r.appendChild(o),e[n].map((function(e){var n=document.createElement("td");n.innerHTML=e.name,r.appendChild(n)})),t.appendChild(r)}));var l=document.createElement("table");document.body.appendChild(l);var c=document.createElement("tr"),s=document.createElement("th");s.innerHTML="id";var f=document.createElement("th");f.innerHTML="name";var d=document.createElement("th");d.innerHTML="count";var p=document.createElement("th");p.innerHTML="twoPersons";var h=document.createElement("th");h.innerHTML="perHolidays";var y=document.createElement("th");y.innerHTML="holidays";var m=document.createElement("th");m.innerHTML="offCount";var v=document.createElement("th");v.innerHTML="flag48";var b=document.createElement("th");b.innerHTML="dayOFFlag48";var w=document.createElement("th");w.innerHTML="countinues";var g=document.createElement("th");g.innerHTML="lastDayOfWork";var k=document.createElement("th");k.innerHTML="notWorkingDays",c.appendChild(s),c.appendChild(f),c.appendChild(d),c.appendChild(p),c.appendChild(h),c.appendChild(y),c.appendChild(m),c.appendChild(v),c.appendChild(b),c.appendChild(w),c.appendChild(g),c.appendChild(k),l.appendChild(c),n.map((function(e){var n=document.createElement("tr");Object.keys(e).map((function(t){var r=document.createElement("td");r.innerHTML="".concat(e[t]),n.appendChild(r)})),l.appendChild(n)}))}(h,f),console.log(">>",e),[3,6];r.label=5;case 5:return e++,[3,1];case 6:return[2]}}))}))})();